<div style="flex: 1 0 30%" class="card my-2 movie-item">
    <div class="card-header text-truncate">
        <div class="movie-title">
            {{ movie.get_the_main_title }} ({{ movie.year }})
        </div>
        <div class="directors">
            <em>
                {% for director in movie.get_directors %}
                    <a href="{% url 'search_movies' %}?director={{ director.name }}">
                        {{ director.name }}
                    </a>{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </em>
        </div>

        <div class="countries">
            <small>
                {% for country in movie.countries.all %}
                    {{ country }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </small>
        </div>
    </div>
    <div class="card-body">
        <div class="plot-and-image">
            <div style="max-width: 50%; margin-right: 1rem; position: relative; border:1px solid rgba(0, 0, 0, 0.125)" class="img-fluid float-left" >
                <span style="position: absolute; right: 0.3rem; top: 0.3rem;" class="badge badge-primary">{{ movie.rating }}</span>
                <img class="img-fluid float-left" 
                    src="{{ movie.clean_poster_thumbnail_url }}" alt="{{ movie.get_the_main_title }}" />
            </div>
            <p class="card-text">
                {{ movie.get_plot }}
            </p>
        </div>

        {% comment %}
        <div style="clear: both; padding-top: 1rem;" class="directors">
            <strong class="d-block">Dirigida por:</strong>
            {% for director in movie.get_directors %}
                <a href="{% url 'search_movies' %}?director={{ director.name }}">
                    {{ director.name }}
                </a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>

        <div class="countries">
            <strong class="d-block">Original de:</strong>
            {% for country in movie.countries.all %}
                {{ country }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
        {% endcomment %}

        {% if movie.get_other_main_titles %}
            <div class="other-titles" style="clear: both; padding-top: 1rem;">
                <strong class="d-block">Tambien conocida como:</strong>
                <ul>
                    {% for other_title in movie.get_other_main_titles %}
                        <li>
                            {{ other_title }}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        {% if movie.tags.all or movie.genres.all or movie.content_rating_systems.all %}
            <div class="tag-cloud" style="clear: both; padding-top: 1rem;">
                {% if movie.tags.all %}
                    {% for tag in movie.tags.all %}
                        <a class="badge badge-success" href="{% url 'search_movies' %}?tag={{ tag }}">
                            {{ tag }}
                        </a>
                    {% endfor %}
                {% endif %}

                {% if movie.genres.all %}
                    {% for tag in movie.genres.all %}
                        <a class="badge badge-info" href="{% url 'search_movies' %}?genre={{ tag }}">
                            {{ tag }}
                        </a>
                    {% endfor %}
                {% endif %}

                {% if movie.content_rating_systems.all %}
                    {% for tag in movie.content_rating_systems.all %}
                        <a class="badge badge-danger" href="{% url 'search_movies' %}?cr_system={{ tag }}">
                            {{ tag }}
                        </a>
                    {% endfor %}
                {% endif %}
            </div>
        {% endif %}
    </div>
    <div class="card-footer">
        <div class="storage-types">
            {% if movie.get_storage_types %}
                <strong class="d-block">Medios:</strong>

                <ul>
                {% for st in movie.get_storage_types %}
                    <li class="storage-type-{{ st.storage_type }}">
                        {% if st.is_original %}
                            <span class="original">{{ st.storage_type }}</path>
                        {% endif %}
                        {% if st.is_drive %}
                            <span class="drive">{{ st.name }}</path>
                        {% endif %}
                        {% if st.is_net_share or st.is_drive %}
                            <span class="path">
                                {% if st.get_url_to_storage_type %}
                                    <a href="{{ st.get_url_to_storage_type }}">
                                        {{ st.path }}
                                    </a>
                                {% else %}
                                    {{ st.path }}
                                {% endif %}
                            </path>
                        {% endif %}
                    </li>
                {% endfor %}
                </ul>
            {% else %}
                <div class="alert alert-warning" role="alert">
                    No hay medios de almacenamiento para esta pelicula.
                </div>
            {% endif %}
        </div>
    </div>
</div>
